import {
  CodeSurfer,
  CodeSurferColumns,
  Step,
} from "code-surfer";
import { github, vsDark } from "@code-surfer/themes";

export const theme = vsDark;


# Pure Functions

---


#### Some Rules:


<ul style={{ width: '80%', fontSize: '.75em'}}>
<li>Given the same  <span style={{color: "#FEBE9C"}}><strong>input</strong></span>, you get the same  <span style={{color: "#FEBE9C"}}><strong>output</strong></span></li>
<li>No <span style={{color: "#FEBE9C"}}><strong>Side Effects</strong></span></li>
</ul>

---

<CodeSurfer>

```js title="Same output for same input"

const getUpperCase = letter => {

  const lowerToUpper = {
    a: 'A',
    b: 'B',
    ...
  }

  if (!(letter in lowerToUpper))
    return null

  return lowerToUpper[letter]
}

getUpperCase('a') // A

```

```diff 2[22:27] title="We accept a lowercase letter as input"
```

```diff 4,5,6,7,8 title="There's a mapping between lowercase and uppercase letters"
```

```diff 4,5,6,7,8 title="Because our domain is finite, we can precompute all the expected inputs/outputs"
```

```diff 10,11 title="But first we need to guard against bad input"
```

```diff 10,11 title="I like to read this is as follows:"
```

```diff 10[7:7] title="If it's NOT true"
```

```diff 10[9:30] title="That letter is a key in lowerToUpper"
```

```diff 11 title="Return null"
```

```diff 13 title="If the input is valid, return the uppercase letter from our mapping"
```

</CodeSurfer>

---

## What Are Side Effects?

---

<div style={{ width: '80%', fontSize: '.75em'}}>
Side effects are anything that could conceivably cause the output to be different
</div>

---

## A bit nebulous I know...

---

### Here are a few examples


<div style={{ width: '80%', fontSize: '.75em'}}>
  <li>Interacting with a variable that isn't input to the function</li>
  <li>Logging</li>
  <li>Randomness</li>
  <li>IO</li>
</div>

---


<div style={{ width: '80%', fontSize: '.75em'}}>
The problem is the world  <span style={{color: "#FEBE9C"}}><strong>(global state)</strong></span> can shift underneath your feet.
</div>

---

##### Anything you interact with needs to be  <span style={{color: "#FEBE9C"}}><strong>input</strong></span> to the function

---


<CodeSurferColumns themes={[github]}>

<Step>

```js title="Impure" subtitle="Notice the output changes even don't change the input"

let a = 3

const addOne = () => a + 1

addOne() // 4

a = 4

addOne() // 5

```

```js title="Pure" subtitle="Same output for same input"

const addOne = x => x + 1

addOne(3) // 4

```

</Step>

</CodeSurferColumns>
